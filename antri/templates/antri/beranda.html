{% extends 'antri/base.html' %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'antri/css/beranda.css' %}">
<link rel="stylesheet" href="{% static 'antri/css/name-card.css' %}">
{% endblock %}

{% block content %}
{% include 'antri/name-card.html' %}
<div class="card">
  <div id="title">
    <h3>{{ date }}</h3>
  </div>
  <table class="table"></table>
  <div id="buttons">
    {% if logged_in %}
    <a class="button" id="hari-ini" onclick="show_popup()">+ Daftar Antri Hari Ini</a>
    <a class="button" href="{% url 'antri:daftar-antri' %}">+ Daftar Antri Hari Lain</a>
    {% else %}
    <p>Silahkan masuk / daftar terlebih dahulu:</p>
    <a class="button" href="{% url 'antri:masuk' %}">Masuk</a>
    <a class="button" href="{% url 'antri:daftar' %}">Daftar</a>
    {% endif %}
  </div>
</div>
<div id="popup">
  <div class="cover" onclick="hide_popup()"></div>
  <div id="popup-card" onclick="show_popup()">
    <form method="post">
      {% csrf_token %}
      <table>
        <tr>
          <th>Hari, Tanggal:</th>
          <td>{{ date }}</td>
        </tr>
        <tr>
          <th>
            {{ form.pasien_set.label }}:
          </th>
          <td>
            {{ form.pasien_set.errors }}
            <ul>
              {% for pk, option in form.pasien_set.field.widget.choices %}
              <li>
                <label for="id_{{ form.pasien_set.name }}_{{ forloop.counter|add:"-1" }}">
                  <input type="checkbox" name="{{ form.pasien_set.name }}" value="{{ pk }}" id="id_{{ form.pasien_set.name }}_{{ forloop.counter|add:"-1" }}">
                  <span class="checkmark"></span>
                  {{ option }}
                </label>
              </li>
              {% endfor %}
              <li class="addition">
                <a class="new-pasien" href="{% url 'antri:daftar-pasien' %}">
                  <span class="plus"></span>
                  Daftar Pasien Baru
                </a>
              </li>
            </ul>
          </td>
        </tr>
      </table>
      <input class="button" type="submit" name="antri" value="+ Daftar Antri Hari Ini">
    </form>
  </div>
</div>
{% endblock %}

{% block script %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="{% static 'admin/js/vendor/jquery/jquery.min.js' %}"></script>{# offline backup #}
<noscript>Please enable javascript.</noscript>
<script>
  var get_antri_url = '{% url 'antri:get-antri' %}'
</script>
<script src="{% static 'antri/js/beranda.js' %}"></script>
{% endblock %}
